{"version":3,"file":"Index-f8cab700.js","sources":["../../../../js/uploadbutton/shared/UploadButton.svelte","../../../../js/uploadbutton/Index.svelte"],"sourcesContent":["<script lang=\"ts\">\n\timport { tick, createEventDispatcher, getContext } from \"svelte\";\n\timport { BaseButton } from \"@gradio/button\";\n\timport {\n\t\tupload,\n\t\tprepare_files,\n\t\ttype FileData,\n\t\ttype upload_files\n\t} from \"@gradio/client\";\n\n\texport let elem_id = \"\";\n\texport let elem_classes: string[] = [];\n\texport let visible = true;\n\texport let label: string | null;\n\texport let value: null | FileData | FileData[];\n\texport let file_count: string;\n\texport let file_types: string[] = [];\n\texport let root: string;\n\texport let size: \"sm\" | \"lg\" = \"lg\";\n\texport let icon: FileData | null = null;\n\texport let scale: number | null = null;\n\texport let min_width: number | undefined = undefined;\n\texport let variant: \"primary\" | \"secondary\" | \"stop\" = \"secondary\";\n\texport let disabled = false;\n\n\tconst dispatch = createEventDispatcher();\n\n\t// Needed for wasm support\n\tconst upload_fn = getContext<typeof upload_files>(\"upload_files\");\n\n\tlet hidden_upload: HTMLInputElement;\n\tlet accept_file_types: string | null;\n\n\tif (file_types == null) {\n\t\taccept_file_types = null;\n\t} else {\n\t\tfile_types = file_types.map((x) => {\n\t\t\tif (x.startsWith(\".\")) {\n\t\t\t\treturn x;\n\t\t\t}\n\t\t\treturn x + \"/*\";\n\t\t});\n\t\taccept_file_types = file_types.join(\", \");\n\t}\n\n\tfunction open_file_upload(): void {\n\t\tdispatch(\"click\");\n\t\thidden_upload.click();\n\t}\n\n\tasync function load_files(files: FileList): Promise<void> {\n\t\tlet _files: File[] = Array.from(files);\n\t\tif (!files.length) {\n\t\t\treturn;\n\t\t}\n\t\tif (file_count === \"single\") {\n\t\t\t_files = [files[0]];\n\t\t}\n\t\tlet all_file_data = await prepare_files(_files);\n\t\tawait tick();\n\n\t\tall_file_data = (\n\t\t\tawait upload(all_file_data, root, undefined, upload_fn)\n\t\t)?.filter((x) => x !== null) as FileData[];\n\t\tvalue = file_count === \"single\" ? all_file_data?.[0] : all_file_data;\n\t\tdispatch(\"change\", value);\n\t\tdispatch(\"upload\", value);\n\t}\n\n\tasync function load_files_from_upload(e: Event): Promise<void> {\n\t\tconst target = e.target as HTMLInputElement;\n\n\t\tif (!target.files) return;\n\t\tawait load_files(target.files);\n\t}\n\n\tfunction clear_input_value(e: Event): void {\n\t\tconst target = e.target as HTMLInputElement;\n\t\tif (target.value) target.value = \"\";\n\t}\n</script>\n\n<input\n\tclass=\"hide\"\n\taccept={accept_file_types}\n\ttype=\"file\"\n\tbind:this={hidden_upload}\n\ton:change={load_files_from_upload}\n\ton:click={clear_input_value}\n\tmultiple={file_count === \"multiple\" || undefined}\n\twebkitdirectory={file_count === \"directory\" || undefined}\n\tmozdirectory={file_count === \"directory\" || undefined}\n\tdata-testid=\"{label}-upload-button\"\n/>\n\n<BaseButton\n\t{size}\n\t{variant}\n\t{elem_id}\n\t{elem_classes}\n\t{visible}\n\ton:click={open_file_upload}\n\t{scale}\n\t{min_width}\n\t{disabled}\n>\n\t{#if icon}\n\t\t<img class=\"button-icon\" src={icon.url} alt={`${value} icon`} />\n\t{/if}\n\t<slot />\n</BaseButton>\n\n<style>\n\t.hide {\n\t\tdisplay: none;\n\t}\n\t.button-icon {\n\t\twidth: var(--text-xl);\n\t\theight: var(--text-xl);\n\t\tmargin-right: var(--spacing-xl);\n\t}\n</style>\n","<script lang=\"ts\" context=\"module\">\n\texport { default as BaseUploadButton } from \"./shared/UploadButton.svelte\";\n</script>\n\n<script lang=\"ts\">\n\timport type { Gradio } from \"@gradio/utils\";\n\timport type { FileData } from \"@gradio/client\";\n\timport UploadButton from \"./shared/UploadButton.svelte\";\n\n\texport let elem_id = \"\";\n\texport let elem_classes: string[] = [];\n\texport let visible = true;\n\texport let label: string | null;\n\texport let value: null | FileData | FileData[];\n\texport let file_count: string;\n\texport let file_types: string[] = [];\n\texport let root: string;\n\texport let size: \"sm\" | \"lg\" = \"lg\";\n\texport let scale: number | null = null;\n\texport let icon: FileData | null = null;\n\texport let min_width: number | undefined = undefined;\n\texport let variant: \"primary\" | \"secondary\" | \"stop\" = \"secondary\";\n\texport let gradio: Gradio<{\n\t\tchange: never;\n\t\tupload: never;\n\t\tclick: never;\n\t}>;\n\texport let interactive: boolean;\n\n\t$: disabled = !interactive;\n\n\tasync function handle_event(\n\t\tdetail: null | FileData | FileData[],\n\t\tevent: \"change\" | \"upload\" | \"click\"\n\t): Promise<void> {\n\t\tvalue = detail;\n\t\tgradio.dispatch(event);\n\t}\n</script>\n\n<UploadButton\n\t{elem_id}\n\t{elem_classes}\n\t{visible}\n\t{file_count}\n\t{file_types}\n\t{size}\n\t{scale}\n\t{icon}\n\t{min_width}\n\t{root}\n\t{value}\n\t{disabled}\n\t{variant}\n\t{label}\n\ton:click={() => gradio.dispatch(\"click\")}\n\ton:change={({ detail }) => handle_event(detail, \"change\")}\n\ton:upload={({ detail }) => handle_event(detail, \"upload\")}\n>\n\t{label ? gradio.i18n(label) : \"\"}\n</UploadButton>\n"],"names":["insert"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACU,MAAA,EAAA,IAAA,EAAM,qBAAA,EAAuB,UAAA,WAA0B,CAAA,0BAAA;;;;;;;;;;AA0GjC,GAAA,IAAA,CAAA,aAAA,CAAA,GAAA,CAAA,GAAA,EAAA,aAAA,YAAA,GAAI,IAAC,GAAG,CAAA,EAAA,IAAA,CAAA,GAAA,EAAA,KAAA,EAAA,aAAA,CAAA,CAAA;iDAAU,GAAK,CAAA,CAAA,CAAA,CAAA,KAAA,CAAA,CAAA,CAAA;;;GAArDA,QAA+D,CAAA,MAAA,EAAA,GAAA,EAAA,MAAA,CAAA,CAAA;;;AAAjC,GAAA,IAAA,KAAA,YAAA,GAAA,IAAA,CAAA,aAAA,CAAA,GAAA,CAAA,GAAA,EAAA,aAAA,YAAA,GAAI,IAAC,GAAG,CAAA,EAAA;;;;8EAAU,GAAK,CAAA,CAAA,CAAA,CAAA,KAAA,CAAA,CAAA,EAAA;;;;;;;;;;;;;;;;yBADjD,GAAI,CAAA,CAAA,CAAA,IAAA,eAAA,CAAA,GAAA,CAAA,CAAA;;;;;;;;;;;;;;;;;;;;;gBAAJ,GAAI,CAAA,CAAA,CAAA,EAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;8CALC,GAAgB,CAAA,EAAA,CAAA,CAAA,CAAA;;;;;;;;+CAjBlB,GAAiB,CAAA,EAAA,CAAA,CAAA,CAAA;;0DAKf,GAAU,CAAA,CAAA,CAAA,KAAK,UAAU,IAAI,SAAS,CAAA;+EAC/B,GAAU,CAAA,CAAA,CAAA,KAAK,WAAW,IAAI,SAAS,CAAA,CAAA;yEAC1C,GAAU,CAAA,CAAA,CAAA,KAAK,WAAW,IAAI,SAAS,CAAA,CAAA;wEACvC,GAAK,CAAA,CAAA,CAAA,GAAA,gBAAA,CAAA,CAAA,CAAA;;;GAVpBA,QAWC,CAAA,MAAA,EAAA,KAAA,EAAA,MAAA,CAAA,CAAA;;;;;;;;wDANW,GAAsB,CAAA,EAAA,CAAA,CAAA;4BACvB,iBAAiB,CAAA;;;;;;;;gDAJnB,GAAiB,CAAA,EAAA,CAAA,CAAA,CAAA;;;gHAKf,GAAU,CAAA,CAAA,CAAA,KAAK,UAAU,IAAI,SAAS,CAAA,EAAA;;;;8HAC/B,GAAU,CAAA,CAAA,CAAA,KAAK,WAAW,IAAI,SAAS,CAAA,EAAA;;;;wHAC1C,GAAU,CAAA,CAAA,CAAA,KAAK,WAAW,IAAI,SAAS,CAAA,EAAA;;;;kHACvC,GAAK,CAAA,CAAA,CAAA,GAAA,gBAAA,CAAA,CAAA,EAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAhBV,SAAA,iBAAiB,CAAC,CAAQ,EAAA;OAC5B,MAAM,GAAG,CAAC,CAAC,MAA0B,CAAA;AACvC,CAAA,IAAA,MAAM,CAAC,KAAK,EAAE,MAAM,CAAC,KAAK,GAAG,EAAE,CAAA;;;;;AApEzB,CAAA,IAAA,EAAA,OAAO,GAAG,EAAE,EAAA,GAAA,OAAA,CAAA;OACZ,YAAY,GAAA,EAAA,EAAA,GAAA,OAAA,CAAA;AACZ,CAAA,IAAA,EAAA,OAAO,GAAG,IAAI,EAAA,GAAA,OAAA,CAAA;OACd,KAAoB,EAAA,GAAA,OAAA,CAAA;OACpB,KAAmC,EAAA,GAAA,OAAA,CAAA;OACnC,UAAkB,EAAA,GAAA,OAAA,CAAA;OAClB,UAAU,GAAA,EAAA,EAAA,GAAA,OAAA,CAAA;OACV,IAAY,EAAA,GAAA,OAAA,CAAA;AACZ,CAAA,IAAA,EAAA,IAAI,GAAgB,IAAI,EAAA,GAAA,OAAA,CAAA;AACxB,CAAA,IAAA,EAAA,IAAI,GAAoB,IAAI,EAAA,GAAA,OAAA,CAAA;AAC5B,CAAA,IAAA,EAAA,KAAK,GAAkB,IAAI,EAAA,GAAA,OAAA,CAAA;AAC3B,CAAA,IAAA,EAAA,SAAS,GAAuB,SAAS,EAAA,GAAA,OAAA,CAAA;AACzC,CAAA,IAAA,EAAA,OAAO,GAAqC,WAAW,EAAA,GAAA,OAAA,CAAA;AACvD,CAAA,IAAA,EAAA,QAAQ,GAAG,KAAK,EAAA,GAAA,OAAA,CAAA;AAErB,CAAA,MAAA,QAAQ,GAAG,qBAAqB,EAAA,CAAA;;;OAGhC,SAAS,GAAG,UAAU,CAAsB,cAAc,CAAA,CAAA;;KAE5D,aAA+B,CAAA;KAC/B,iBAAgC,CAAA;;AAEhC,CAAA,IAAA,UAAU,IAAI,IAAI,EAAA;AACrB,EAAA,iBAAiB,GAAG,IAAI,CAAA;;AAExB,EAAA,UAAU,GAAG,UAAU,CAAC,GAAG,CAAE,CAAC,IAAA;OACzB,CAAC,CAAC,UAAU,CAAC,GAAG,CAAA,EAAA;WACZ,CAAC,CAAA;;;AAEF,GAAA,OAAA,CAAC,GAAG,IAAI,CAAA;;;AAEhB,EAAA,iBAAiB,GAAG,UAAU,CAAC,IAAI,CAAC,IAAI,CAAA,CAAA;;;UAGhC,gBAAgB,GAAA;AACxB,EAAA,QAAQ,CAAC,OAAO,CAAA,CAAA;AAChB,EAAA,aAAa,CAAC,KAAK,EAAA,CAAA;;;AAGL,CAAA,eAAA,UAAU,CAAC,KAAe,EAAA;AACpC,EAAA,IAAA,MAAM,GAAW,KAAK,CAAC,IAAI,CAAC,KAAK,CAAA,CAAA;;AAChC,EAAA,IAAA,CAAA,KAAK,CAAC,MAAM,EAAA;;;;AAGb,EAAA,IAAA,UAAU,KAAK,QAAQ,EAAA;GAC1B,MAAM,GAAA,CAAI,KAAK,CAAC,CAAC,CAAA,CAAA,CAAA;;;MAEd,aAAa,GAAA,MAAS,aAAa,CAAC,MAAM,CAAA,CAAA;QACxC,IAAI,EAAA,CAAA;AAEV,EAAA,aAAa,UACN,MAAM,CAAC,aAAa,EAAE,IAAI,EAAE,SAAS,EAAE,SAAS,IACpD,MAAM,CAAE,CAAC,IAAK,CAAC,KAAK,IAAI,CAAA,CAAA;;kBAC3B,KAAK,GAAG,UAAU,KAAK,QAAQ;AAAG,IAAA,aAAa,GAAG,CAAC,CAAA;IAAI,aAAa,CAAA,CAAA;;EACpE,QAAQ,CAAC,QAAQ,EAAE,KAAK,CAAA,CAAA;EACxB,QAAQ,CAAC,QAAQ,EAAE,KAAK,CAAA,CAAA;;;AAGV,CAAA,eAAA,sBAAsB,CAAC,CAAQ,EAAA;QACvC,MAAM,GAAG,CAAC,CAAC,MAA0B,CAAA;AAEtC,EAAA,IAAA,CAAA,MAAM,CAAC,KAAK,EAAA,OAAA;QACX,UAAU,CAAC,MAAM,CAAC,KAAK,CAAA,CAAA;;;;;GAanB,aAAa,GAAA,OAAA,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;0BC3BvB,GAAK,CAAA,CAAA,CAAA;cAAG,GAAM,CAAA,EAAA,CAAA,CAAC,IAAI,WAAC,GAAK,CAAA,CAAA,CAAA,CAAA;GAAI,EAAE,IAAA,EAAA,CAAA;;;;;;;;;;;;2EAA/B,GAAK,CAAA,CAAA,CAAA;gBAAG,GAAM,CAAA,EAAA,CAAA,CAAC,IAAI,WAAC,GAAK,CAAA,CAAA,CAAA,CAAA;KAAI,EAAE,IAAA,EAAA,CAAA,EAAA,QAAA,CAAA,CAAA,EAAA,OAAA,CAAA,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAlDrB,CAAA,IAAA,EAAA,OAAO,GAAG,EAAE,EAAA,GAAA,OAAA,CAAA;OACZ,YAAY,GAAA,EAAA,EAAA,GAAA,OAAA,CAAA;AACZ,CAAA,IAAA,EAAA,OAAO,GAAG,IAAI,EAAA,GAAA,OAAA,CAAA;OACd,KAAoB,EAAA,GAAA,OAAA,CAAA;OACpB,KAAmC,EAAA,GAAA,OAAA,CAAA;OACnC,UAAkB,EAAA,GAAA,OAAA,CAAA;OAClB,UAAU,GAAA,EAAA,EAAA,GAAA,OAAA,CAAA;OACV,IAAY,EAAA,GAAA,OAAA,CAAA;AACZ,CAAA,IAAA,EAAA,IAAI,GAAgB,IAAI,EAAA,GAAA,OAAA,CAAA;AACxB,CAAA,IAAA,EAAA,KAAK,GAAkB,IAAI,EAAA,GAAA,OAAA,CAAA;AAC3B,CAAA,IAAA,EAAA,IAAI,GAAoB,IAAI,EAAA,GAAA,OAAA,CAAA;AAC5B,CAAA,IAAA,EAAA,SAAS,GAAuB,SAAS,EAAA,GAAA,OAAA,CAAA;AACzC,CAAA,IAAA,EAAA,OAAO,GAAqC,WAAW,EAAA,GAAA,OAAA,CAAA;OACvD,MAIT,EAAA,GAAA,OAAA,CAAA;OACS,WAAoB,EAAA,GAAA,OAAA,CAAA;;gBAIhB,YAAY,CAC1B,MAAoC,EACpC,KAAoC,EAAA;AAEpC,EAAA,YAAA,CAAA,CAAA,EAAA,KAAK,GAAG,MAAM,CAAA,CAAA;EACd,MAAM,CAAC,QAAQ,CAAC,KAAK,CAAA,CAAA;;;6BAmBN,MAAM,CAAC,QAAQ,CAAC,OAAO,CAAA,CAAA;AACzB,CAAA,MAAA,cAAA,GAAA,CAAA,EAAA,MAAM,EAAO,KAAA,YAAY,CAAC,MAAM,EAAE,QAAQ,CAAA,CAAA;AAC1C,CAAA,MAAA,cAAA,GAAA,CAAA,EAAA,MAAM,EAAO,KAAA,YAAY,CAAC,MAAM,EAAE,QAAQ,CAAA,CAAA;;;;;;;;;;;;;;;;;;;;;;GA5BvD,YAAA,CAAA,EAAA,EAAE,QAAQ,GAAA,CAAI,WAAW,CAAA,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}